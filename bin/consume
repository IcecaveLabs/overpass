#!/usr/bin/env php
<?php
require __DIR__ . '/../vendor/autoload.php';

use Icecave\Overpass\Amqp\AmqpPubSubClient;

$connection = new AMQPConnection(
    [
        'host' => 'localhost',
        'port' => 5672,
    ]
);

$connection->connect();

$pubSub = new AmqpPubSubClient($connection);
$pubSub->subscribe('*');
$pubSub->consume(
    function ($topic, $payload) {
        printf('%-10s %s' . PHP_EOL, $topic, $payload);

        return true;
    }
);
